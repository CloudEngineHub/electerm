var Index;(()=>{"use strict";var t={745:(t,e,i)=>{var s=i(533);e.s=s.createRoot,s.hydrateRoot},533:t=>{t.exports=ReactDOM}},e={};function i(s){var o=e[s];if(void 0!==o)return o.exports;var r=e[s]={exports:{}};return t[s](r,r.exports,i),r.exports}i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var s={};(()=>{i.r(s);var t=i(745);const e=React,o=class{constructor(t,e){this.observer=null,this.shapesPool=["star"],this.shapes=[],this.actionCount=0,this.width=20,this.height=20,this.shapeCount=20,this.interval=100,this.step=3,this.minSize=50,this.maxSize=150,this.colorRed="rgba(207,13,31,.25)",this.colorPool=["rgba(156,183,52,.25)","rgba(227,163,26,.25)","rgba(217,84,56,.25)","rgba(4,80,150,.25)","rgba(122,24,105,.25)"];const i=t instanceof HTMLCanvasElement?t:this.createElement(),s=(t instanceof Option?t:e)||{};Object.assign(this,s),this.dom=i,i.setAttribute("width",i.offsetWidth.toString()),i.setAttribute("height",i.offsetHeight.toString()),this.ctx=i.getContext("2d"),this.width=i.width,this.height=i.height,this.watch()}createElement(){const t=document.createElement("canvas");return t.setAttribute("width",window.innerWidth.toString()),t.setAttribute("height",window.innerHeight.toString()),t.style.position="absolute",t.style.left="0",t.style.top="0",document.body.appendChild(t),t}debounce(t,e){let i;return function(...s){clearTimeout(i),i=setTimeout((()=>{t(...s)}),e)}}handleCanvasDimensionChange(t){const{dom:e}=this;for(const i of t)if(i.target===e){const t=i.contentRect.width,s=i.contentRect.height;this.width=t,this.height=s,e.setAttribute("width",t.toString()),e.setAttribute("height",s.toString()),this.stop(),this.start(this.shapeCount)}}watch(){if(this.dom){const t=new ResizeObserver(this.debounce(this.handleCanvasDimensionChange.bind(this),1e3));t.observe(this.dom),this.observer=t}}destroy(){this.observer?.unobserve(this.dom),this.observer?.disconnect()}start(t=this.shapeCount){this.buildShapes(t),this.animate()}animate(){this.loop()}stop(){clearTimeout(this.intervalHandle),this.clearShapes(),this.shapes=[]}clearShapes(){this.ctx.clearRect(0,0,this.width,this.height)}loop(){this.renderShapes(),this.move(),this.intervalHandle=setTimeout(this.loop.bind(this),this.interval)}renderShapes(){const{shapes:t}=this;this.clearShapes();for(let e=0,i=t.length;e<i;e++){const i=t[e],s=i.type;this["draw"+this.capitalizeString(s)](i)}}buildPosArrayFromText(t,e){const i=this,s=i.ctx,o=i.width,r=i.height,n=t,h=e||{},a=(h.shapeSize,h.scanDistance||5),l=h.fontSize||200,c=h.fontFamily||"sans-serif",d=h.top||20;s.textAlign=h.textAlign||"start",s.textBaseline=h.textBaseline||"top",i.clearShapes(),s.font=l+"px "+c,s.fillStyle="red",s.fillText(n,20,d);const m=s.getImageData(0,0,o,r).data,p=[];for(let t=0;t<o;t+=a)for(let e=0;e<r;e+=a)m[4*(e*o+t)]&&p.push({x:t,y:e});return i.clearShapes(),p}moveTo(t,e){const i=this.shapes,s=t,o=[];let r=(e||{}).speed;r=!r||r>1||r<=0?.5:r;for(let t=0,e=i.length;t<e;t++){const e=i[t],n=s[t],h=(e.x+n.x)*r,a=(e.y+n.y)*r;o.push({...e,x:h,y:a})}this.shapes=o}move(){const{shapes:t,step:e}=this,i=[];for(let s=0,o=t.length;s<o;s++){const o=t[s],{r}=(o.directionY,o.directionX,o);let n=o.x+o.directionX*e,h=o.y+o.directionY*e;const a=n>o.r?n-(this.width-o.r):o.r-n,l=h>o.r?h-(this.height-o.r):o.r-h;let c=0,d=0;a>0&&l>0?a>l?(h=h>o.r?this.height-o.r:r,d=h-o.y,c=d/o.directionY*o.directionX,n=o.x+c,o.directionY=-o.directionY):(n=n>o.r?this.width-o.r:r,c=n-o.x,d=c/o.directionX*o.directionY,h=o.y+d,o.directionX=-o.directionX):a>0?(n=n>o.r?this.width-o.r:r,c=n-o.x,d=c/o.directionX*o.directionY,h=o.y+d,o.directionX=-o.directionX):l>0&&(h=h>o.r?this.height-o.r:r,d=h-o.y,c=d/o.directionY*o.directionX,n=o.x+c,o.directionY=-o.directionY),o.x=n,o.y=h,i.push(o)}this.shapes=i}capitalizeString(t){return"string"!=typeof t||0===t.length?t:t.charAt(0).toUpperCase()+t.slice(1)}getRandomColor(){const{colorPool:t}=this,e=t.length;return t[Math.floor(Math.random()*e)]}buildShapes(t,e){const i=t||this.shapeCount,s=e||this.shapesPool,o=s.length;let r;for(let t=0;t<i;t++)r=Math.floor(Math.random()*o),this.shapes.push(this.buildShape(s[r]))}buildShape(t){return this["buildShape"+this.capitalizeString(t)]()}popShape(t){const e=this.shapes.length;let i=e<t?e:t;i=e-i,this.shapes=this.shapes.slice(0,i),this.shapeCount=this.shapeCount-t}pushShape(t,e){const i=e||this.shapesPool,s=i.length,o=Math.floor(Math.random()*s);this.shapes.push({...this.buildShape(i[o]),...t}),this.shapeCount++}drawBubble(t){const{ctx:e}=this;e.beginPath(),e.fillStyle=t.fillStyle,e.arc(t.x,t.y,t.r,0,2*Math.PI,!0),e.fill(),e.closePath()}drawBalloon(t){const{ctx:e}=this;e.beginPath(),e.fillStyle=t.fillStyle,e.arc(t.x,t.y,t.r,0,2*Math.PI,!0),e.fill(),e.closePath(),e.beginPath(),e.moveTo(this.width/2,this.height-20),e.lineTo(t.x,t.y),e.strokeStyle=t.strokeStyle,e.stroke(),e.closePath()}drawLight(t){const{ctx:e}=this;e.beginPath(),e.moveTo(20,20),e.lineTo(t.x,t.y),e.strokeStyle=t.strokeStyle,e.stroke(),e.closePath()}drawHeart(t){const{ctx:e}=this,i=t.r/75,{x:s,y:o}=t,r=s-t.r,n=o-t.r;e.beginPath(),e.fillStyle=t.fillStyle,e.moveTo(r+75*i,n+40*i),e.bezierCurveTo(r+75*i,n+37*i,r+70*i,n+25*i,r+50*i,n+25*i),e.bezierCurveTo(r+20*i,n+25*i,r+20*i,n+62.5*i,r+20*i,n+62.5*i),e.bezierCurveTo(r+20*i,n+80*i,r+40*i,n+102*i,r+75*i,n+120*i),e.bezierCurveTo(r+110*i,n+102*i,r+130*i,n+80*i,r+130*i,n+62.5*i),e.bezierCurveTo(r+130*i,n+62.5*i,r+130*i,n+25*i,r+100*i,n+25*i),e.bezierCurveTo(r+85*i,n+25*i,r+75*i,n+37*i,r+75*i,n+40*i),e.fill(),e.closePath()}drawStar(t){let e=Math.PI/2*3;const i=t.x,s=t.y,o=t.spike,r=Math.PI/o,{ctx:n}=this,h=t.outerR,a=t.innerR;let l,c;t.strokeStyle?n.strokeStyle=t.strokeStyle:n.fillStyle=t.fillStyle,n.beginPath(),n.moveTo(i,s-h);for(let t=0;t<o;t++)l=i+Math.cos(e)*h,c=s+Math.sin(e)*h,n.lineTo(l,c),e+=r,l=i+Math.cos(e)*a,c=s+Math.sin(e)*a,n.lineTo(l,c),e+=r;n.lineTo(i,s-h),t.strokeStyle?n.stroke():n.fill(),n.closePath()}buildShapeBubble(t=this.getRandomColor()){const e=Math.floor(Math.random()*(this.maxSize-this.minSize))+this.minSize,i=2*e,s=this.width>i?this.width:i+1,o=this.height>i?this.height:i+1;return{x:e+Math.floor(Math.random()*(s-i)),y:e+Math.floor(Math.random()*(o-i)),r:e,directionX:(Math.floor(7*Math.random())-3)/3,directionY:(Math.floor(7*Math.random())-3)/3,type:"bubble",fillStyle:t}}buildShapeBalloon(t=this.getRandomColor()){const e=Math.floor(Math.random()*(this.maxSize-this.minSize))+this.minSize,i=2*e,s=this.width>i?this.width:i+1,o=this.height>i?this.height:i+1;return{x:e+Math.floor(Math.random()*(s-i)),y:e+Math.floor(Math.random()*(o-i)),r:e,directionX:(Math.floor(7*Math.random())-3)/3,directionY:(Math.floor(7*Math.random())-3)/3,type:"balloon",strokeStyle:t,fillStyle:t}}buildShapeLight(t=this.getRandomColor()){const e=Math.floor(Math.random()*(this.maxSize-this.minSize))+this.minSize,i=2*e,s=this.width>i?this.width:i+1,o=this.height>i?this.height:i+1;return{x:e+Math.floor(Math.random()*(s-i)),y:e+Math.floor(Math.random()*(o-i)),r:e,directionX:(Math.floor(7*Math.random())-3)/3,directionY:(Math.floor(7*Math.random())-3)/3,type:"light",strokeStyle:t}}buildShapeHeart(t=this.getRandomColor()){const e=Math.floor(Math.random()*(this.maxSize-this.minSize))+this.minSize,i=2*e,s=this.width>i?this.width:i+1,o=this.height>i?this.height:i+1;return{x:e+Math.floor(Math.random()*(s-i)),y:e+Math.floor(Math.random()*(o-i)),r:e,directionX:2*Math.random()-1,directionY:2*Math.random()-1,type:"heart",fillStyle:t}}buildShapeStar(t=this.getRandomColor()){const e=Math.floor(Math.random()*(this.maxSize-this.minSize))+this.minSize,i=2*e,s=this.width>i?this.width:i+1,o=this.height>i?this.height:i+1,r=e+Math.floor(Math.random()*(s-i)),n=e+Math.floor(Math.random()*(o-i)),h=2*Math.random()-1,a=2*Math.random()-1,l=5+Math.floor(5*Math.random()),c={x:r,y:n,r:e,outerR:e,innerR:e/2,spike:l,directionX:h,directionY:a,type:"star"};return 5===l?c.fillStyle=this.colorRed:c.strokeStyle=t,c}},r=THREE,n=class{constructor(t={}){this.id="",this.className="",this.starSize=.1,this.shootingStarSize=.2,this.starCount=1e4,this.shootingStarCount=30,this.starDistance=100,this.shootingStarDistance=50,this.starColor=16777215,this.shootingStarColor=16777215,this.bgColor=0,this.stars=null,this.shootingStars=[],Object.assign(this,t),this.scene=new r.Scene,this.camera=new r.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3),this.renderer=new r.WebGLRenderer,this.id&&this.renderer.domElement.setAttribute("id",this.id),this.className&&this.renderer.domElement.classList.add(this.className),this.camera.position.z=5,this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setClearColor(this.bgColor),document.body.appendChild(this.renderer.domElement),this.createStars(),this.createShootingStars(),this.animate()}createStars(){const t=new r.BufferGeometry,e=[],{starSize:i,starCount:s,starColor:o,starDistance:n}=this;for(let t=0;t<s;t++){const t=(Math.random()-.5)*n,i=(Math.random()-.5)*n,s=(Math.random()-.5)*n;e.push(t,i,s)}t.setAttribute("position",new r.Float32BufferAttribute(e,3));const h=new r.PointsMaterial({color:o,size:i});this.stars=new r.Points(t,h),this.scene.add(this.stars)}createShootingStars(){const{shootingStarColor:t,shootingStarDistance:e,shootingStarSize:i,shootingStarCount:s}=this;this.shootingStars=[];for(let o=0;o<s;o++){const s=new r.BufferGeometry,o=[0,0,0,0,0,0];s.setAttribute("position",new r.Float32BufferAttribute(o,3));const n=new r.PointsMaterial({color:t,size:i}),h=new r.Points(s,n);h.position.x=(Math.random()-.5)*e,h.position.y=(Math.random()-.5)*e,h.position.z=(Math.random()-.5)*e,this.scene.add(h),this.shootingStars.push(h)}}animate(){requestAnimationFrame(this.animate.bind(this)),this.stars&&(this.stars.rotation.x+=1e-4,this.stars.rotation.y+=1e-4),this.shootingStars.forEach((t=>{t.position.x-=.05,t.position.y-=.05,t.position.z-=.05,t.position.x<-25&&(t.position.x=25,t.position.y=50*(Math.random()-.5),t.position.z=50*(Math.random()-.5))})),this.renderer.render(this.scene,this.camera)}};function h(){var[t,i]=(0,e.useState)(!0),[s,r]=(0,e.useState)(window.initShape||"bubble"),h=["star","bubble","heart","light","balloon"],a=h.length;return(0,e.useEffect)((()=>{!function(){new n({shootingStarSize:.4,shootingStarColor:6710886,starColor:6710886,bgColor:16777215}).renderer.domElement.classList.add("animate");var t={shapeCount:20,timer:100,step:3,minSize:50,maxSize:150,shapesPool:[s]},e=new o(document.getElementById("ca"),t);e.start(),window.shapesInst=e}()}),[]),React.createElement("div",{className:"pd2y"},React.createElement("span",{className:"mg2r pointer",onClick:function(){t?window.shapesInst.stop():window.shapesInst.start(),i(!t)}},t?"Stop animation":"Start animation"),React.createElement("span",{onClick:function(){var t=h.findIndex((t=>t===s)),e=h[(t+1)%a];r(e),window.shapesInst.shapesPool=[e],window.shapesInst.stop(),window.shapesInst.start()},className:"pointer"},"Change animation shapes"))}var a=["text"];function l(){return l=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},l.apply(this,arguments)}function c(t){var{text:e}=t,i=function(t,e){if(null==t)return{};var i,s,o=function(t,e){if(null==t)return{};var i,s,o={},r=Object.keys(t);for(s=0;s<r.length;s++)i=r[s],e.indexOf(i)>=0||(o[i]=t[i]);return o}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(s=0;s<r.length;s++)i=r[s],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(o[i]=t[i])}return o}(t,a);return React.createElement("a",l({},i,{key:e}),e)}function d(t){return React.createElement("div",{className:"mg3y pd3y"},React.createElement("div",null,React.createElement("a",{href:"https://html5beta.com",className:"mg3r"},"© ZHAO Xudong"),(t.links||[]).map(c)),t.noAnimate?null:React.createElement(h,null))}const m=function(){return React.createElement("div",{className:"pd2"},React.createElement(d,{links:[{href:"http://github.com/zxdong262",target:"_blank",rel:"noreferrer",className:"mg3r",text:"GitHub"},{href:"https://html5beta.com/page/timeline.html",target:"_blank",rel:"noreferrer",text:"Resume"}]}))};(0,t.s)(document.getElementById("container")).render(e.createElement(m,null))})(),Index=s})();